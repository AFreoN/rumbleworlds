{"ast":null,"code":"import{useRef,useEffect}from\"react\";import*as THREE from\"three\";import{GLTFLoader}from\"three/examples/jsm/loaders/GLTFLoader.js\";// import rumblerModel from \"assets/home/characters/rumbler_yellow_idle.gltf\";\n// import rumblerModel from \"assets/home/characters/rumbler_boxer_cleaned.glb\";\nimport rumblerModel from\"assets/home/characters/rumbler_boxer_no_tex.glb\";// import rumblerModel from \"assets/home/characters/rumbler_boxer_all512.glb\";\n//1024x1024 textures\nimport bodyTex from\"assets/home/characters/boxer_textures/SportsSet_YellowRumbler_BaseColor_01.png\";import sportsTex from\"assets/home/characters/boxer_textures/SportSet_BaseColor.jpg\";import projectorHoloColorTex from\"assets/home/characters/boxer_textures/hologram_projection_tex.png\";import projectorHoloEmissionTex from\"assets/home/characters/boxer_textures/hologram_projection_tex.001.png\";import boxerTex from\"assets/home/characters/boxer_textures/BoxerSet_BaseColor.png\";//512x512 textures\n// import bodyTex from \"assets/home/characters/boxer_textures/SportsSet_YellowRumbler_BaseColor_01_512.png\"\n// import sportsTex from \"assets/home/characters/boxer_textures/SportSet_BaseColor_512.png\"\n// import projectorHoloColorTex from \"assets/home/characters/boxer_textures/hologram_projection_tex_512.png\"\n// import projectorHoloEmissionTex from \"assets/home/characters/boxer_textures/hologram_projection_tex_512.001.png\"\n// import boxerTex from \"assets/home/characters/boxer_textures/BoxerSet_BaseColor_512.png\"\nimport\"./idle.scss\";import{MathUtils}from\"three\";import{jsx as _jsx}from\"react/jsx-runtime\";var modelLoaded=false;function IdleCharacter(){const ref=useRef();useEffect(()=>{let mixers=[];var mixer;let camera;const manager=new THREE.LoadingManager();const clock=new THREE.Clock();const renderer=new THREE.WebGLRenderer({alpha:true,antialias:true});renderer.setClearColor(0x000000,0);let scene;let rumbler;const current=ref.current;let width=current.clientWidth;// or window.innerWidth;\nlet height=current.clientHeight;// = window.innerHeight for full screen\ncamera=new THREE.PerspectiveCamera(55,width/height,0.1,1000);const init=()=>{scene=new THREE.Scene();// camera.position.set(0, 2.8, 8);\ncamera.position.set(0,3.4,8);// camera.rotation.set(MathUtils.degToRad(10),0,0);\ncamera.rotation.set(MathUtils.degToRad(0),0,0);//   camera.position.multiplyScalar(30);\n//   camera.rotation.set(50, 0, 0);\nrenderer.shadowMap.enabled=true;// renderer.outputEncoding = THREE.sRGBEncoding;\n// renderer.setClearColor(0xffffff, 0);\n// scene.background = new THREE.Color(0x999999);\n// scene.background = new THREE.Color().setHSL(0.6, 0, 1);\nrenderer.setSize(width,height);// document.body.appendChild( renderer.domElement );\n// use ref as a mount point of the Three.js scene instead of the document.body\ncurrent.appendChild(renderer.domElement);// add light\n// scene.fog = new THREE.Fog(0xa0a0a0, 1, 2000);\nscene.fog=new THREE.Fog(scene.background,1,200);const hemiLight=new THREE.HemisphereLight(0xffeeb1,0x080820,1);scene.add(hemiLight);const amblight=new THREE.AmbientLight(0x080820,0.5);scene.add(amblight);// add to show light helper\n/*const hemiLightHelper = new THREE.HemisphereLightHelper(hemiLight, 10);\r\n      scene.add(hemiLightHelper);\r\n      */renderer.toneMapping=THREE.ReinhardToneMapping;renderer.toneMappingExposure=1.6;renderer.shadowMap.enabled=true;//Blue rim light\nconst dirLight=new THREE.DirectionalLight(0x2fcaf5,5);//dirLight.color.setHSL(0.1, 1, 0.95);\n// dirLight.position.multiplyScalar(30);\nconst d=200;dirLight.position.set(1.5,-0.2,-2.5);// dirLight.position.multiplyScalar(1000);\ndirLight.castShadow=true;dirLight.shadow.camera.top=d;dirLight.shadow.camera.bottom=-d;dirLight.shadow.camera.left=-d;dirLight.shadow.camera.right=d;// dirLight.shadow.camera.near = 0.1;\n// dirLight.shadow.camera.far = 100;\ndirLight.shadow.camera.far=35000;dirLight.shadow.bias=-0.0001;scene.add(dirLight);//red rim light\nconst dirlight2=new THREE.DirectionalLight(0xed2f2f,5);// dirlight2.position.multiplyScalar(30);\ndirlight2.position.set(-1.5,-0.1,-0.5);// dirlight2.position.multiplyScalar(1000);\ndirlight2.castShadow=true;dirlight2.shadow.camera.top=d;dirlight2.shadow.camera.bottom=-d;dirlight2.shadow.camera.left=-d;dirlight2.shadow.camera.right=d;dirlight2.shadow.camera.far=35000;dirlight2.shadow.bias=-0.0001;scene.add(dirlight2);//White top light\nconst dirlight3=new THREE.DirectionalLight(0xffffff,4);// dirlight3.position.multiplyScalar(30);\ndirlight3.position.set(-2.5,15,4);// dirlight3.position.multiplyScalar(1000);\ndirlight3.castShadow=true;dirlight3.shadow.camera.top=d;dirlight3.shadow.camera.bottom=-d;dirlight3.shadow.camera.left=-d;dirlight3.shadow.camera.right=d;dirlight3.shadow.camera.far=35000;dirlight3.shadow.bias=-0.0001;scene.add(dirlight3);const dirLightTarget=new THREE.Object3D();dirLightTarget.position.set(0,0,0);scene.add(dirLightTarget);dirLight.target=dirLightTarget;dirlight2.target=dirLightTarget;dirlight3.target=dirLightTarget;renderer.domElement.style.display=\"none\";// add to show light helper\n// const dirLightHelper = new THREE.DirectionalLightHelper(dirLight, 10);\n// scene.add(dirLightHelper);\n// load model\nconst loader=new GLTFLoader(manager);loader.load(rumblerModel,function(object){rumbler=object.scene;rumbler.position.set(0,0.6,0);rumbler.scale.set(10,10,10);rumbler.rotation.set(0,MathUtils.degToRad(0),0);// console.log(\"IdleCharacter loaded\");\nmixer=new THREE.AnimationMixer(rumbler);const action=mixer.clipAction(object.animations[0]);action.play();mixers.push(mixer);const texmanager=new THREE.LoadingManager();const texLoader=new THREE.TextureLoader(texmanager);const bodyMat=new THREE.MeshStandardMaterial({map:texLoader.load(bodyTex,tex=>{tex.flipY=false;tex.encoding=THREE.sRGBEncoding;}),name:'bodyMat'});const boxerMat=new THREE.MeshStandardMaterial({map:texLoader.load(boxerTex,tex=>{tex.flipY=false;tex.encoding=THREE.sRGBEncoding;}),name:'boxerMat'});const sportsMat=new THREE.MeshStandardMaterial({map:texLoader.load(sportsTex,tex=>{tex.flipY=false;tex.encoding=THREE.sRGBEncoding;}),name:'sportsMat'});const holoMat=new THREE.MeshBasicMaterial({map:texLoader.load(projectorHoloColorTex,tex=>{tex.flipY=false;tex.encoding=THREE.sRGBEncoding;}),// emissiveIntensity : 2,\ntransparent:true,name:'holoMat'});texmanager.onLoad=()=>{bodyMat.needsUpdate=true;boxerMat.needsUpdate=true;sportsMat.needsUpdate=true;holoMat.needsUpdate=true;const changeTextures=true;rumbler.traverse(function(child){if(child.isMesh){child.castShadow=true;child.receiveShadow=true;if(changeTextures){if(child.name==='Body003'||child.name==='Eye_L003'||child.name==='Eye_R003'||child.name==='EyeBrow_L003'||child.name==='EyeBrow_R003'||child.name==='Mouth003'){// console.log(child.material);\nchild.material=bodyMat;child.material.needsUpdate=true;// console.log(child.material);\n}else if(child.name==='Glove_L002'||child.name==='Glove_R002'){child.material=boxerMat;child.material.needsUpdate=true;}else if(child.name==='HeadSet009'||child.name==='Tshit009'||child.name==='SpotShoe_L002'||child.name==='SpotShoe_R002'){child.material=sportsMat;child.material.needsUpdate=true;}else if(child.name==\"pCone1006\"){child.material=holoMat;child.material.needsUpdate=true;}else if(child.name==\"pCylinder9011\"){const baseMat=new THREE.MeshStandardMaterial({color:0x00FFFF,roughness:0.2,metalness:0.7});child.material=baseMat;}}if(child.material.map){// child.material.map = null\n// child.material.needsUpdate = true\n}}});render();console.log(\"Idle Character loaded!!!\");};scene.add(rumbler);modelLoaded=true;renderer.domElement.style.display=\"block\";renderer.compile(rumbler,camera);renderer.render(scene,camera);// setTimeout(() => {\n// }, 2500);\n});};init();manager.onLoad=()=>{render();animate();};const doc=document.getElementById('idlecharacter_model');function isScrolledIntoView(el){var rect=el.getBoundingClientRect();var elemTop=rect.top;var elemBottom=rect.bottom;// Only completely visible elements return true:\n// var isVisible = (elemTop >= 0) && (elemBottom <= window.innerHeight);\nvar isVisible=elemTop<window.innerHeight&&elemBottom>=0;// Partially visible elements return true:\n//isVisible = elemTop < window.innerHeight && elemBottom >= 0;\nreturn isVisible;}// animate\nconst animate=function(){requestAnimationFrame(animate);// characterChange();\nif(isScrolledIntoView(doc)&&modelLoaded){const delta=clock.getDelta();// for (let i = 0; i < mixers.length; i++) {\n//   mixers[i].update(delta);\n// }\nmixer.update(delta);render();}};const render=()=>{renderer.render(scene,camera);};const handleResize=()=>{width=ref.current.clientWidth;height=ref.current.clientHeight;// height = 500;\nrenderer.setSize(width,height);camera.aspect=width/height;camera.updateProjectionMatrix();render();};window.addEventListener(\"resize\",handleResize);return()=>{// Callback to cleanup three js, cancel animationFrame, etc\nwindow.removeEventListener(\"resize\",handleResize);current.removeChild(renderer.domElement);};},[]);return/*#__PURE__*/_jsx(\"div\",{ref:ref,className:\"IdleCharacter\"});}export default IdleCharacter;","map":{"version":3,"names":["useRef","useEffect","THREE","GLTFLoader","rumblerModel","bodyTex","sportsTex","projectorHoloColorTex","projectorHoloEmissionTex","boxerTex","MathUtils","jsx","_jsx","modelLoaded","IdleCharacter","ref","mixers","mixer","camera","manager","LoadingManager","clock","Clock","renderer","WebGLRenderer","alpha","antialias","setClearColor","scene","rumbler","current","width","clientWidth","height","clientHeight","PerspectiveCamera","init","Scene","position","set","rotation","degToRad","shadowMap","enabled","setSize","appendChild","domElement","fog","Fog","background","hemiLight","HemisphereLight","add","amblight","AmbientLight","toneMapping","ReinhardToneMapping","toneMappingExposure","dirLight","DirectionalLight","d","castShadow","shadow","top","bottom","left","right","far","bias","dirlight2","dirlight3","dirLightTarget","Object3D","target","style","display","loader","load","object","scale","AnimationMixer","action","clipAction","animations","play","push","texmanager","texLoader","TextureLoader","bodyMat","MeshStandardMaterial","map","tex","flipY","encoding","sRGBEncoding","name","boxerMat","sportsMat","holoMat","MeshBasicMaterial","transparent","onLoad","needsUpdate","changeTextures","traverse","child","isMesh","receiveShadow","material","baseMat","color","roughness","metalness","render","console","log","compile","animate","doc","document","getElementById","isScrolledIntoView","el","rect","getBoundingClientRect","elemTop","elemBottom","isVisible","window","innerHeight","requestAnimationFrame","delta","getDelta","update","handleResize","aspect","updateProjectionMatrix","addEventListener","removeEventListener","removeChild","className"],"sources":["D:/Others/Three js/rumbleworlds/src/components/Home/IdleCharacter/IdleCharacter.jsx"],"sourcesContent":["import { useRef, useEffect } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\r\n// import rumblerModel from \"assets/home/characters/rumbler_yellow_idle.gltf\";\r\n// import rumblerModel from \"assets/home/characters/rumbler_boxer_cleaned.glb\";\r\nimport rumblerModel from \"assets/home/characters/rumbler_boxer_no_tex.glb\";\r\n// import rumblerModel from \"assets/home/characters/rumbler_boxer_all512.glb\";\r\n\r\n//1024x1024 textures\r\nimport bodyTex from \"assets/home/characters/boxer_textures/SportsSet_YellowRumbler_BaseColor_01.png\"\r\nimport sportsTex from \"assets/home/characters/boxer_textures/SportSet_BaseColor.jpg\"\r\nimport projectorHoloColorTex from \"assets/home/characters/boxer_textures/hologram_projection_tex.png\"\r\nimport projectorHoloEmissionTex from \"assets/home/characters/boxer_textures/hologram_projection_tex.001.png\"\r\nimport boxerTex from \"assets/home/characters/boxer_textures/BoxerSet_BaseColor.png\"\r\n\r\n//512x512 textures\r\n// import bodyTex from \"assets/home/characters/boxer_textures/SportsSet_YellowRumbler_BaseColor_01_512.png\"\r\n// import sportsTex from \"assets/home/characters/boxer_textures/SportSet_BaseColor_512.png\"\r\n// import projectorHoloColorTex from \"assets/home/characters/boxer_textures/hologram_projection_tex_512.png\"\r\n// import projectorHoloEmissionTex from \"assets/home/characters/boxer_textures/hologram_projection_tex_512.001.png\"\r\n// import boxerTex from \"assets/home/characters/boxer_textures/BoxerSet_BaseColor_512.png\"\r\nimport \"./idle.scss\";\r\nimport { MathUtils } from \"three\";\r\n\r\nvar modelLoaded = false;\r\n\r\nfunction IdleCharacter() {\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    let mixers = [];\r\n    var mixer;\r\n\r\n    let camera;\r\n\r\n    const manager = new THREE.LoadingManager();\r\n    const clock = new THREE.Clock();\r\n\r\n    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\r\n    renderer.setClearColor(0x000000, 0);\r\n\r\n    let scene;\r\n    let rumbler;\r\n\r\n    const current = ref.current;\r\n\r\n    let width = current.clientWidth; // or window.innerWidth;\r\n    let height = current.clientHeight; // = window.innerHeight for full screen\r\n    camera = new THREE.PerspectiveCamera(55, width / height, 0.1, 1000);\r\n\r\n    const init = () => {\r\n      scene = new THREE.Scene();\r\n      // camera.position.set(0, 2.8, 8);\r\n      camera.position.set(0, 3.4, 8);\r\n      // camera.rotation.set(MathUtils.degToRad(10),0,0);\r\n      camera.rotation.set(MathUtils.degToRad(0), 0, 0);\r\n      //   camera.position.multiplyScalar(30);\r\n\r\n      //   camera.rotation.set(50, 0, 0);\r\n\r\n      renderer.shadowMap.enabled = true;\r\n      // renderer.outputEncoding = THREE.sRGBEncoding;\r\n      // renderer.setClearColor(0xffffff, 0);\r\n      // scene.background = new THREE.Color(0x999999);\r\n\r\n      // scene.background = new THREE.Color().setHSL(0.6, 0, 1);\r\n      renderer.setSize(width, height);\r\n      // document.body.appendChild( renderer.domElement );\r\n      // use ref as a mount point of the Three.js scene instead of the document.body\r\n      current.appendChild(renderer.domElement);\r\n\r\n      // add light\r\n      // scene.fog = new THREE.Fog(0xa0a0a0, 1, 2000);\r\n      scene.fog = new THREE.Fog(scene.background, 1, 200);\r\n      const hemiLight = new THREE.HemisphereLight(0xffeeb1, 0x080820, 1);\r\n      scene.add(hemiLight);\r\n\r\n      const amblight = new THREE.AmbientLight(0x080820, 0.5);\r\n      scene.add(amblight);\r\n\r\n      // add to show light helper\r\n      /*const hemiLightHelper = new THREE.HemisphereLightHelper(hemiLight, 10);\r\n      scene.add(hemiLightHelper);\r\n      */\r\n\r\n      renderer.toneMapping = THREE.ReinhardToneMapping;\r\n      renderer.toneMappingExposure = 1.6;\r\n      renderer.shadowMap.enabled = true;\r\n\r\n      //Blue rim light\r\n      const dirLight = new THREE.DirectionalLight(0x2fcaf5, 5);\r\n      //dirLight.color.setHSL(0.1, 1, 0.95);\r\n      // dirLight.position.multiplyScalar(30);\r\n\r\n      const d = 200;\r\n      dirLight.position.set(1.5, -0.2, -2.5);\r\n      // dirLight.position.multiplyScalar(1000);\r\n\r\n      dirLight.castShadow = true;\r\n\r\n      dirLight.shadow.camera.top = d;\r\n      dirLight.shadow.camera.bottom = -d;\r\n      dirLight.shadow.camera.left = -d;\r\n      dirLight.shadow.camera.right = d;\r\n      // dirLight.shadow.camera.near = 0.1;\r\n      // dirLight.shadow.camera.far = 100;\r\n\r\n      dirLight.shadow.camera.far = 35000;\r\n      dirLight.shadow.bias = -0.0001;\r\n      scene.add(dirLight);\r\n\r\n      //red rim light\r\n      const dirlight2 = new THREE.DirectionalLight(0xed2f2f, 5);\r\n      // dirlight2.position.multiplyScalar(30);\r\n\r\n      dirlight2.position.set(-1.5, -0.1, -0.5);\r\n      // dirlight2.position.multiplyScalar(1000);\r\n\r\n      dirlight2.castShadow = true;\r\n      dirlight2.shadow.camera.top = d;\r\n      dirlight2.shadow.camera.bottom = -d;\r\n      dirlight2.shadow.camera.left = -d;\r\n      dirlight2.shadow.camera.right = d;\r\n\r\n      dirlight2.shadow.camera.far = 35000;\r\n      dirlight2.shadow.bias = -0.0001;\r\n      scene.add(dirlight2);\r\n\r\n      //White top light\r\n      const dirlight3 = new THREE.DirectionalLight(0xffffff, 4);\r\n      // dirlight3.position.multiplyScalar(30);\r\n\r\n      dirlight3.position.set(-2.5, 15, 4);\r\n      // dirlight3.position.multiplyScalar(1000);\r\n\r\n      dirlight3.castShadow = true;\r\n      dirlight3.shadow.camera.top = d;\r\n      dirlight3.shadow.camera.bottom = -d;\r\n      dirlight3.shadow.camera.left = -d;\r\n      dirlight3.shadow.camera.right = d;\r\n\r\n      dirlight3.shadow.camera.far = 35000;\r\n      dirlight3.shadow.bias = -0.0001;\r\n      scene.add(dirlight3);\r\n\r\n      const dirLightTarget = new THREE.Object3D();\r\n      dirLightTarget.position.set(0, 0, 0);\r\n      scene.add(dirLightTarget);\r\n\r\n      dirLight.target = dirLightTarget;\r\n      dirlight2.target = dirLightTarget;\r\n      dirlight3.target = dirLightTarget;\r\n\r\n      renderer.domElement.style.display = \"none\";\r\n\r\n      // add to show light helper\r\n      // const dirLightHelper = new THREE.DirectionalLightHelper(dirLight, 10);\r\n      // scene.add(dirLightHelper);\r\n\r\n      // load model\r\n      const loader = new GLTFLoader(manager);\r\n\r\n      loader.load(rumblerModel, function (object) {\r\n        rumbler = object.scene;\r\n        rumbler.position.set(0, 0.6, 0);\r\n        rumbler.scale.set(10, 10, 10);\r\n        rumbler.rotation.set(0, MathUtils.degToRad(0), 0);\r\n        // console.log(\"IdleCharacter loaded\");\r\n\r\n        mixer = new THREE.AnimationMixer(rumbler);\r\n        const action = mixer.clipAction(object.animations[0]);\r\n        action.play();\r\n        mixers.push(mixer);\r\n\r\n        const texmanager = new THREE.LoadingManager();\r\n        const texLoader = new THREE.TextureLoader(texmanager); \r\n\r\n        const bodyMat = new THREE.MeshStandardMaterial({\r\n            map: texLoader.load( bodyTex, (tex) => {\r\n            tex.flipY = false\r\n            tex.encoding = THREE.sRGBEncoding\r\n            } ),\r\n            name:'bodyMat'\r\n        })\r\n        const boxerMat = new THREE.MeshStandardMaterial({\r\n            map: texLoader.load( boxerTex, (tex) => {\r\n            tex.flipY = false\r\n            tex.encoding = THREE.sRGBEncoding\r\n            } ),\r\n            name:'boxerMat'\r\n        })\r\n        const sportsMat = new THREE.MeshStandardMaterial({\r\n            map: texLoader.load( sportsTex, (tex) => {\r\n            tex.flipY = false\r\n            tex.encoding = THREE.sRGBEncoding\r\n            } ),\r\n            name:'sportsMat'\r\n        })\r\n        const holoMat = new THREE.MeshBasicMaterial({\r\n          map : texLoader.load( projectorHoloColorTex, (tex) => {\r\n            tex.flipY = false\r\n            tex.encoding = THREE.sRGBEncoding\r\n          }),\r\n          // emissiveIntensity : 2,\r\n          transparent : true,\r\n          name: 'holoMat'\r\n        })\r\n        texmanager.onLoad = () => { \r\n          bodyMat.needsUpdate = true;\r\n          boxerMat.needsUpdate = true;\r\n          sportsMat.needsUpdate = true;\r\n          holoMat.needsUpdate = true;\r\n          const changeTextures = true\r\n  \r\n  \r\n          rumbler.traverse(function (child) {\r\n            if (child.isMesh) {\r\n              child.castShadow = true;\r\n              child.receiveShadow = true;\r\n  \r\n              if(changeTextures){\r\n                if(child.name === 'Body003' \r\n                || child.name === 'Eye_L003' \r\n                || child.name === 'Eye_R003' \r\n                || child.name === 'EyeBrow_L003'\r\n                || child.name === 'EyeBrow_R003'\r\n                || child.name === 'Mouth003') {\r\n                  // console.log(child.material);\r\n                  child.material = bodyMat\r\n                  child.material.needsUpdate = true\r\n                  // console.log(child.material);\r\n                }\r\n                else if (child.name === 'Glove_L002' || child.name === 'Glove_R002'){\r\n                  child.material = boxerMat\r\n                  child.material.needsUpdate = true\r\n                }\r\n                else if (child.name === 'HeadSet009' || child.name === 'Tshit009' || child.name === 'SpotShoe_L002' || child.name === 'SpotShoe_R002'){\r\n                  child.material = sportsMat\r\n                  child.material.needsUpdate = true\r\n                }\r\n                else if(child.name == \"pCone1006\"){\r\n                  child.material = holoMat\r\n                  child.material.needsUpdate = true\r\n                }\r\n                else if(child.name == \"pCylinder9011\"){\r\n                  const baseMat = new THREE.MeshStandardMaterial({color : 0x00FFFF, roughness : 0.2, metalness : 0.7});\r\n                  child.material = baseMat;\r\n                }\r\n              }\r\n              \r\n  \r\n              if (child.material.map) {\r\n                // child.material.map = null\r\n                // child.material.needsUpdate = true\r\n              }\r\n            }\r\n          });\r\n          render();\r\n          console.log(\"Idle Character loaded!!!\"); \r\n        }\r\n\r\n        scene.add(rumbler);\r\n        modelLoaded = true;\r\n        renderer.domElement.style.display = \"block\";\r\n        renderer.compile(rumbler,camera)\r\n        renderer.render(scene,camera);\r\n        // setTimeout(() => {\r\n        // }, 2500);\r\n      });\r\n    };\r\n\r\n    init();\r\n\r\n    manager.onLoad = () => {\r\n      render();\r\n      animate();\r\n    };\r\n\r\n    const doc = document.getElementById('idlecharacter_model');\r\n    function isScrolledIntoView(el) {\r\n      var rect = el.getBoundingClientRect();\r\n      var elemTop = rect.top;\r\n      var elemBottom = rect.bottom;\r\n  \r\n      // Only completely visible elements return true:\r\n      // var isVisible = (elemTop >= 0) && (elemBottom <= window.innerHeight);\r\n      var isVisible = elemTop < window.innerHeight && elemBottom >= 0;\r\n      // Partially visible elements return true:\r\n      //isVisible = elemTop < window.innerHeight && elemBottom >= 0;\r\n      return isVisible;\r\n    }\r\n\r\n    // animate\r\n    const animate = function () {\r\n      requestAnimationFrame(animate);\r\n      // characterChange();\r\n      if(isScrolledIntoView(doc) && modelLoaded){\r\n\r\n        const delta = clock.getDelta();\r\n        // for (let i = 0; i < mixers.length; i++) {\r\n          //   mixers[i].update(delta);\r\n          // }\r\n          mixer.update(delta);\r\n          render();\r\n      }\r\n    };\r\n\r\n    const render = () => {\r\n      renderer.render(scene, camera);\r\n    };\r\n\r\n    const handleResize = () => {\r\n      width = ref.current.clientWidth;\r\n      height = ref.current.clientHeight;\r\n      // height = 500;\r\n      renderer.setSize(width, height);\r\n      camera.aspect = width / height;\r\n      camera.updateProjectionMatrix();\r\n      render();\r\n    };\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => {\r\n      // Callback to cleanup three js, cancel animationFrame, etc\r\n\r\n      window.removeEventListener(\"resize\", handleResize);\r\n      current.removeChild(renderer.domElement);\r\n    };\r\n  }, []);\r\n\r\n  return <div ref={ref} className=\"IdleCharacter\"></div>;\r\n}\r\n\r\nexport default IdleCharacter;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}